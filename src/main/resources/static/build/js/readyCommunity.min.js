var URL_TYPE={API_VERSION:"/v1",NONPUBLIC_PREFIX:"/v1/nonpub",PUB_PREFIX:"/v1/pub"};var PAGING_DATA={recommend:{tempPage:1,pageCapacity:3,total:3},hot:{tempPage:1,pageCapacity:6,total:6},last:{tempPage:1,pageCapacity:6,total:6}};window.onload=function(){var a=document.getElementById("clientQQ");if((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))){a.href="mqqwpa://im/chat?chat_type=wpa&uin=1246886075&version=1&src_type=web&web_src=oicqzone.com"}else{a.href="tencent://message/?uin=1246886075&Site=http://vps.shuidazhe.com&Menu=yes"}renderRecommendPhoto();renderHotPhoto();renderLastPhoto();$(".wait-loading").fadeOut("slow")};function renderRecommendPhoto(){$.ajax({url:URL_TYPE.PUB_PREFIX+"/getRecommendVrPhoto",type:"get",data:{tempPage:PAGING_DATA.recommend.tempPage,pageCapacity:PAGING_DATA.recommend.pageCapacity},async:false,dataType:"json",success:function(b){if(b.code==0){if(b.data.length>0){$("#recommendPhotoContainer").empty();PAGING_DATA.recommend.total=b.data[0].total;for(var a=0;a<b.data.length;a++){var c;if(b.data[a].description.length>=15){c=b.data[a].description.substring(0,15)+"..."}else{if(b.data[a].description.length==0){c="......"}else{c=b.data[a].description}}$("#recommendPhotoContainer").append('<div class="col-xs-12 col-sm-4 col-md-4" style="padding: 5px;margin: 0;">\n            <a href=\'panorama.html?id='+b.data[a].id+'\' class="img-link" style="background-image: url('+b.data[a].url+')"></a>\n            <div class="author-msg"><i class="fa fa-user-circle" aria-hidden="true"></i>&nbsp;<span style="color: #f4f9f4">'+b.data[a].username+'</span></div>\n            <div class="descr-container" >'+c+"</div>\n        </div>")}$("#recommendPhotoContainer").append('<div class="col-xs-12 col-sm-12 col-md-12"><div align="right"><button type="button" class="btn btn-link" onclick="nextPage(\'recommend\')">换一批</button></div></div>')}else{$("#recommendPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}}else{$("#recommendPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}},error:function(a){console.log(a);$("#recommendPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}})}function renderHotPhoto(){$.ajax({url:URL_TYPE.PUB_PREFIX+"/getHotVrPhoto",type:"get",data:{tempPage:PAGING_DATA.hot.tempPage,pageCapacity:PAGING_DATA.hot.pageCapacity},async:false,dataType:"json",success:function(b){if(b.code==0){if(b.data.length>0){$("#hotPhotoContainer").empty();PAGING_DATA.hot.total=b.data[0].total;for(var a=0;a<b.data.length;a++){var c;if(b.data[a].description.length>=10){c=b.data[a].description.substring(0,10)+"..."}else{if(b.data[a].description.length==0){c="......"}else{c=b.data[a].description}}$("#hotPhotoContainer").append('<div class="col-xs-6 col-sm-4 col-md-4" style="padding: 5px;margin: 0;">\n            <a href=\'panorama.html?id='+b.data[a].id+'\' class="img-link" style="background-image: url('+b.data[a].url+')"></a>\n            <div class="author-msg"><i class="fa fa-user-circle" aria-hidden="true"></i>&nbsp;<span style="color: #f4f9f4">'+b.data[a].username+'</span></div>\n            <div class="descr-container" >'+c+"</div>\n        </div>")}$("#hotPhotoContainer").append('<div class="col-xs-12 col-sm-12 col-md-12"><div align="right"><button type="button" class="btn btn-link" onclick="nextPage(\'hot\')">换一批</button></div></div>')}else{$("#hotPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}}else{$("#hotPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}},error:function(a){console.log(a);$("#hotPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}})}function renderLastPhoto(){$.ajax({url:URL_TYPE.PUB_PREFIX+"/getLastVrPhoto",type:"get",data:{tempPage:PAGING_DATA.last.tempPage,pageCapacity:PAGING_DATA.last.pageCapacity},async:false,dataType:"json",success:function(b){if(b.code==0){if(b.data.length>0){$("#LastPhotoContainer").empty();PAGING_DATA.last.total=b.data[0].total;for(var a=0;a<b.data.length;a++){var c;if(b.data[a].description.length>=10){c=b.data[a].description.substring(0,10)+"..."}else{if(b.data[a].description.length==0){c="......"}else{c=b.data[a].description}}$("#LastPhotoContainer").append('<div class="col-xs-6 col-sm-4 col-md-4" style="padding: 5px;margin: 0;">\n            <a href=\'panorama.html?id='+b.data[a].id+'\' class="img-link" style="background-image: url('+b.data[a].url+')"></a>\n            <div class="author-msg"><i class="fa fa-user-circle" aria-hidden="true"></i>&nbsp;<span style="color: #f4f9f4">'+b.data[a].username+'</span></div>\n            <div class="descr-container" >'+c+"</div>\n        </div>")}$("#LastPhotoContainer").append('<div class="col-xs-12 col-sm-12 col-md-12"><div align="right"><button type="button" class="btn btn-link" onclick="nextPage(\'last\')">换一批</button></div></div>')}else{$("#LastPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}}else{$("#LastPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}},error:function(a){console.log(a);$("#LastPhotoContainer").html('<div align="center">\n            <img src="../images/source/nothing.png" alt="nothing here" style="width: 200px;">\n        </div>')}})}function nextPage(a){switch(a){case"recommend":PAGING_DATA.recommend.tempPage++;if(PAGING_DATA.recommend.total-((PAGING_DATA.recommend.tempPage-1)*PAGING_DATA.recommend.pageCapacity)>0){renderRecommendPhoto()}else{PAGING_DATA.recommend.tempPage=1;renderRecommendPhoto()}break;case"hot":PAGING_DATA.hot.tempPage++;if(PAGING_DATA.hot.total-((PAGING_DATA.hot.tempPage-1)*PAGING_DATA.hot.pageCapacity)>0){renderHotPhoto()}else{PAGING_DATA.hot.tempPage=1;renderHotPhoto()}break;case"last":PAGING_DATA.last.tempPage++;if(PAGING_DATA.last.total-((PAGING_DATA.last.tempPage-1)*PAGING_DATA.last.pageCapacity)>0){renderLastPhoto()}else{PAGING_DATA.last.tempPage=1;renderLastPhoto()}break;default:}}console.log("欢迎使用VR 360全景\n小本网站还请大神勿黑，手下留情呀~~\n如有什么疑问请联系\nQQ：1246886075\nvr.beifengtz.com");